<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<!---------- misc libraries ---------->
<script src="lib/setOps.js"></script>
<script src="lib/jsoneditor.min.js"></script>
<script src="lib/osmtogeojson.js"></script>
<script src="lib/parser.js"> </script>

<!---------- jQuery libraries ---------->
<script src="lib/jquery-1.12.3.min.js"></script>
<script src="lib/purl.js"></script>
<!-- link rel="stylesheet" href="lib/jquery.toast.min.css" />
<script src="lib/jquery.toast.min.js"></script -->

<!---------- bootstrap libraries ---------->
<link rel="stylesheet" href="lib/bootstrap.min.css" />
<script src="lib/bootstrap.min.js"></script>
<script src="lib/bootstrap-hover-dropdown.min.js"></script>

<link rel="stylesheet" href="lib/bootstrap-theme.min.css">
<script src="lib/jquery.toaster.js"></script>

<!---------- leaflet libraries ---------->
<link rel="stylesheet" href="lib/leaflet.css" />
<script src="lib/leaflet.js"></script>

<script src="lib/leaflet-providers.min.js"></script>

<script src="lib/leaflet-omnivore.min.js"></script>

<!-- link rel="stylesheet" href="lib/leaflet.contextmenu.css" />
<script src="lib/leaflet.contextmenu.js"></script -->

<link rel="stylesheet" href="lib/leaflet.tooltip.css" />
<script src="lib/leaflet.tooltip.js"></script>

<!-- link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.min.js"></script -->

<script src="lib/Leaflet.Icon.Glyph.js"></script>

<script src="lib/leaflet.rotatedMarker.js"></script>

<!---------- potluckmap ---------->

<link rel="stylesheet" href="potluckmap.css" />
<script id="potluckmap_script" src="potluckmap.js"></script>

<!-- http://stackoverflow.com/questions/2524502/refresh-iframe-cache-issue -->
<meta http-Equiv="Cache-Control" Content="no-cache" />
<meta http-Equiv="Pragma" Content="no-cache" />
<meta http-Equiv="Expires" Content="0" />

<title>Potluckmap Demo</title>

</head>

<body>

<h1 id="title">Potluckmap Demo</h1>

<div id="map_and_toolbar">

  <div id="themap"></div>
  <!-- http://www.w3schools.com/bootstrap/bootstrap_button_groups.asp -->
  <div id="toolbar" class="btn-toolbar" role="toolbar">
  
    <div class="btn-group dropup">
      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"  data-hover="dropdown">
      <span class="glyphicon glyphicon-pushpin"></span></button>
      <ul id="view_menu" class="dropdown-menu" role="menu"></ul>
    </div>
  
    <div class="btn-group dropup">
      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"  data-hover="dropdown">
      <span class="glyphicon glyphicon-refresh"></span></button>
      <ul class="dropdown-menu" role="menu">
        <li><a onclick="reload('changed');">reload changed</a></li>
        <li><a onclick="reload('all');">reload all</a></li>
        <li><a onclick="rebuildMenu();">rebuild menu</a></li>
      </ul>
    </div>
  
  </div>
</div>

<p>Create an osm map that can be collaboratively built
by collecting url's of remote geojson/gpx/csv pages,
each of which can be independently edited or generated.
This example shows the real-time position of a few
bus lines of Taichung City, updated every 30 seconds or so.
See <a href="http://g0v.github.io/potluckmap/">
project homepage</a>.

<p>用 potluckmap 協作繪製地圖： 每個人 (或每個單位)
只要負責編輯或動態產生一個 (geojson 或 gpx 或 csv 格式的)
文字檔並丟到網站上， 就可以用 potluckmap 把這些資訊放在同一張地圖上。
本範例展示臺中市某幾線路公車的動態實況， 大約每 30 秒更新一次。
詳見 <a href="http://g0v.github.io/potluckmap/">
計畫首頁</a>。

<p><strong>Can't see moving buses?</strong>
One possible cause is that you visit the https
version of this page, while this page
is making a request from an http (instead of https) source.
(If you open the console and see "Blocked loading mixed active content",
then this is surely the case.)
In the future we will upgrade (from http to https) the web server
which hosts the bus position querying program.
Before that happens, you can make sure that the browser uses "http" and not "https".
If you have installed the EFF's https everywhere plugin,
you have to ask the plugin to ignore this demo so that you can type "http".
Alternatively, you can also follow <a href=
"https://support.mozilla.org/en-US/kb/mixed-content-blocking-firefox?redirectlocale=en-US&redirectslug=how-does-content-isnt-secure-affect-my-safety">
this instruction</a> to disable the mixed active content protection in firefox.

<div id="config"></div>

</body>
</html>
